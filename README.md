# QRKot - приложение для Благотворительного фонда поддержки котиков

## **Основная цель и описание проекта**
Оптимизация работы фонда по сбору пожертвований на различные целевые проекты.


### **Используемые языки, технологии**
Python3  
FastAPI  
SQLAlchemy  
Alembic

Сервис реализован на [FastAPI](https://fastapi.tiangolo.com), 
в качестве ORM используется [SQLAchemy](https://docs.sqlalchemy.org/en/14/index.html).
Для настройки управления пользователями использована библиотека 
[FastAPI Users](https://fastapi-users.github.io/fastapi-users/10.0/).
Выполняется валидация данных и обработка ошибок.

### **Ключевые возможности:** 

***Создание и управление проектами.***  
У каждого проекта есть название, описание и сумма, которую планируется собрать.
Все пожертвования идут в проект, открытый раньше других; 
когда этот проект набирает необходимую сумму и закрывается — 
пожертвования начинают поступать в следующий проект.   

***Создание и просмотр пожертвований.***   
Каждый пользователь может сделать пожертвование. 
Пожертвования вносятся в фонд, а не в конкретный проект. 

***Алгоритм распределения пожертвований.***   
Каждое полученное пожертвование автоматически добавляется в первый открытый проект, 
который ещё не набрал нужную сумму. Если пожертвование больше нужной суммы или 
же в Фонде нет открытых проектов — оставшиеся деньги ждут открытия следующего проекта. 
При создании нового проекта все неинвестированные пожертвования автоматически 
вкладываются в новый проект.

***Права пользователей.***  
Целевые проекты создаются администраторами сайта. 
Любой пользователь может видеть список всех проектов.
Зарегистрированные пользователи могут отправлять пожертвования и просматривать 
список своих пожертвований.

## **Запуск проекта**
Выполните следующие команды в терминале:

1. Клонировать репозиторий и перейти в него:
```
git clone git@github.com:DoeryMK/cat_charity_fund.git
```
или
```
git clone https://github.com/DoeryMK/cat_charity_fund.git
```
```
cd cat_charity_fund
```
2. Создать, активировать виртуальное окружение:

```
python3 -m venv venv
```

* Если у вас Linux/macOS

    ```
    source venv/bin/activate
    ```

* Если у вас windows

    ```
    source venv/scripts/activate
    ```

3. Установить зависимости из файла requirements.txt:

```
python3 -m pip install --upgrade pip
```

```
pip install -r requirements.txt
```
4.  Создать файл «.env», добавив в него переменные окружения:
```
touch .env
```
5. Применить миграции:
```
alembic upgrade head 
```

6. Выполнить команду запуска проекта:
```
uvicorn app.main:app --reload
```

### _Описание шаблона .env_
Необходимо указать переменные окружения в следующем формате:

APP_TITLE = *название приложения*  
APP_DESCRIPTION = *описание проекта*    
DATABASE_URI = *подключение БД, например: sqlite+aiosqlite:///./fastapi.db*   
SECRET = *уникальный секретный ключ*  
FIRST_SUPERUSER_EMAIL = *email для автоматического создания суперпользователя*  
FIRST_SUPERUSER_PASSWORD = *пароль для автоматического создания суперпользователя*  


## **Работа со спецификацией**
Для работы с документацией файл ```openapi.json``` можно загрузить 
на сайт https://redocly.github.io/redoc/. 

## **Тестирование**
После запуска проекта интерактивная документация с возможностью тестирования 
будет доступна по ссылке: http://127.0.0.1:8000/swagger.

Также для тестирования работы API можно пользоваться 
HTTP-клиентами: [Postman](https://www.postman.com) или [httpie](https://httpie.io). 


## Авторы: Мухамеджанова Дарья ([DoeryMK](https://github.com/DoeryMK)) 